<html>
<head>
    <link rel="stylesheet" type="text/css" href="../stylesheets/searchlayout.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript" src="../javascripts/search.js"></script>
	<script type="text/javascript">
	    $(document).ready(function ()
		{
			var currentWatching = getCookieValue("region");
			var curWatchingGeocode = getCookieValue("geocode");
			
			// if cookie not set, first time default
			if(currentWatching == "")
				displayCurrentRegion("No Where", "");
			else
				displayCurrentRegion(currentWatching, curWatchingGeocode);
			
			// respond to the event when the user hit enter in the search box
			$("#searchbox").keydown(function(event) {
				if(event.keyCode == "13")
					respondToInput();
			});
			
			// respond to the event when the user click the search button
			$("#searchbtn").click(function() {
				respondToInput();
			});
			
			// center the map to the location where wants to watch
			// hide status message and the choice list
			$("#choices li").live("click",function() {
				var latLng = $(this).find("a").attr("href");
				var name = $(this).find("a").attr("value");
				
				parent.gmap.goTo(latLng);
				
				$("#result").remove();
				$("#choices").remove();
				
				return false;
			});
			
			// when the user click the location after "You are watching "
			// recenter the map at that location.
			$("#region").live("click",function() {
				
				var latLng = $(this).attr("href");
				parent.gmap.goTo(latLng);
				
				return false;
			});
        });
	</script>
</head>
<body>
	<b>Please enter a location to watch: </b><br/>
	<input type="text" name="search" id="searchbox">
	<a href="#" id="searchbtn">Search</a><br/><br/>
</body>
</html>
